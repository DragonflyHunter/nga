<nav class="navbar navbar-expand-xl aumentum-navbar fixed-top mr-auto" >
  <div class="navbar-header order-0 d-flex">
    <button class="nav-item navbar-toggler custom-toggler order-1" type="button" (click)="isNavbarCollapsed = !isNavbarCollapsed" data-target="#navbarsDefault" aria-controls="navbarsDefault" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
    <a class="navbar-brand order-0 d-xl-flex d-none" href="#"><img height="40px" src="assets/logo-lg.png"></a>
    <a class="navbar-brand order-0 d-xl-none d-flex" href="#"><img height="40px" src="assets/logo.png"></a>
  </div>
  <div [ngbCollapse]="isNavbarCollapsed" class="collapse navbar-collapse order-last order-xl-2" id="navbarsDefault">
    <ul class="navbar-nav">
      <!-- <li class="nav-item dropdown" ngbDropdown>
        <a class="nav-link dropdown-toggle" href="#" ngbDropdownToggle><span class="fa fa-get-pocket"></span></a>
        <div class="dropdown-menu-right" ngbDropdownMenu>
          <a class="dropdown-item" href="#">Workflow Search</a>
          <a class="dropdown-item" href="#">Bulk Messaging</a>
        </div>
      </li> -->
      <li class="nav-item dropdown position-static" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id01" href="#" ngbDropdownToggle>AA</a>
        <div class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id01" ngbDropdownMenu>
            <div class="container overflow-auto">
                <div class="row w-100">
                  <a class="dropdown-item" href="#">AA Item 1</a>
                  <a class="dropdown-item" href="#">AA Item 2</a>
                  <a class="dropdown-item" href="#">AA Item 3</a>
                </div>
            </div>
        </div>
      </li>
      <li class="nav-item dropdown position-static" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id02" href="#" ngbDropdownToggle (click)="search.focus()">Valuation</a>
        <div id="mega-menu" class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id02" ngbDropdownMenu>
          <div class="container-xl">
              <div class="row w-100">
                <div class="col-2"></div>
                <div class="col-8">
                  <div  ngbDropdown #myDrop="ngbDropdown">
                    <div class="input-group mb-3">
                      <input #search type="text" class="form-control" ngbDropdownAnchor id="qsearch"  autocomplete="off" autofocus  (focus)="searchFocus(myDrop, $event.target.value)" [value]="searchText" (input)="searchKeyPress(myDrop, $event.target.value)">
                      <div class="input-group-append">
                        <button type="button" class="btn btn-outline-secondary">Quick Search</button>
                      </div>    
                      {{searchText}}                               
                      <div id="search-dropdown" class="dropdown-menu w-100" ngbDropdownMenu aria-labelledby="qsearch">
                        <button ngbDropdownItem *ngFor="let hint of searchHints">
                          <i [ngClass]="hint.icon"></i>{{hint.text}} 
                        </button>
                      </div>
                    </div>

                  </div>
                  
                  <!-- <button class="btn btn-outline-success mr-2" (click)="$event.stopPropagation(); myDrop.open();">Open from outside</button>
                  <button class="btn btn-outline-danger mr-2" (click)="$event.stopPropagation(); myDrop.close();">Close from outside</button>
                  <div data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <div #mydrop class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="qsearch" ngbDropdown>
                      <a class="dropdown-item" href="#">Real Property</a>
                      <a class="dropdown-item" href="#">Mineral Characteristics</a>                        
                    </div>         
                    <div class="input-group mb-3">
                      <input type="text" class="form-control" id="qsearch"  (focus)="myDrop.open()" (change)="searchChanged()">
                      <div class="input-group-append">
                        <button type="button" class="btn btn-outline-secondary">Quick Search</button>
                      </div>         
                          
                    </div>

                  </div> -->

                </div>
              </div>
              <div class="row w-100" style="padding-bottom: 10px">
                <div class="col-2"></div>
                <div class="col-8 recent-tasks">
                    Recent Tasks:
                    <a class="dropdown-item" href="#">Field Inspection</a>
                    <a class="dropdown-item" href="#">Reports</a>
                    <a class="dropdown-item" href="#">Workflow</a>
                    <a class="dropdown-item" href="#">RPA Configuration</a>                
                </div>              
              </div>
              <div class="row w-100">
                <div class= "mega-group">                  
                  <div class="group-name"><i class="fa fa-th"></i>  Characteristics</div>
                  <hr>
                  <a class="dropdown-item pinned" href="#">Real Property<i class="fas fa-thumbtack"></i><i class="fas fa-close"></i></a>
                  <a class="dropdown-item pinnable" href="#">Mineral Characteristics<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Condominiums<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Sale Value Distribution<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Permits<i class="fas fa-thumbtack"></i></a>    
                  <a class="dropdown-item pinnable" href="#">Asking Rent<i class="fas fa-thumbtack"></i></a>                 
                </div>
                <div class= "mega-group">
                  <div class="group-name"><i class="fa fa-database"></i>  Mass Changes</div>
                  <hr>
                  <a class="dropdown-item pinnable" href="#">Mass Update<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Mass Calculation<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Mass Value Conclusion<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Mass Event Creation<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Mass Direct Enrollment<i class="fas fa-thumbtack"></i></a>
                </div>
                <div class="mega-group">
                  <div class="group-name"><i class="fa fa-pie-chart"></i>  Analysis</div>
                  <hr>
                  <a class="dropdown-item pinnable" href="#">Cost Model<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">External Rates<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Income<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Land<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Neighborhood<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Sales Ratio<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Study Group<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Visual<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Income Comparable<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Data Analysis and Processing<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Insights<i class="fas fa-thumbtack"></i></a>
                </div>
                <div class= "mega-group">
                  <div class="group-name"><i class="fa fa-gears"></i>  Batch Processes</div>
                  <hr>
                  <a class="dropdown-item pinnable" href="#">Batch Reports<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Benchmark Comp Sales<i class="fas fa-thumbtack"></i></a>    
                  <div class="subgroup">
                    <div class="group-name">Export</div>
                    <a class="dropdown-item pinnable" href="#">E Gov<i class="fas fa-thumbtack"></i></a>
                    <a class="dropdown-item pinnable" href="#">Regression<i class="fas fa-thumbtack"></i></a>   
                  </div>
                  <div class="subgroup">
                    <div class="group-name">Import</div>
                    <a class="dropdown-item pinnable" href="#">Temporary Pins<i class="fas fa-thumbtack"></i></a>       
                    <a class="dropdown-item pinnable" href="#">Permit<i class="fas fa-thumbtack"></i></a>    
                  </div>                             
                </div>                
                <div class="mega-group">
                  <div class="group-name"><i class="fa fa-usd"></i>  Valuation Management</div>
                  <hr>
                  <a class="dropdown-item pinnable" href="#">Neighborhood Maintenance<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Model Control<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Cost<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Land <i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Reconciled Value Model<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Modeled Income<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Mineral Claim Fee<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Comparable<i class="fas fa-thumbtack"></i></a>
                  <a class="dropdown-item pinnable" href="#">Regression<i class="fas fa-thumbtack"></i></a>
                </div>
              </div>              
          </div>
        </div>
      </li>
      <li class="nav-item dropdown position-static" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id03" href="#" ngbDropdownToggle>PPA</a>
        <div class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id03" ngbDropdownMenu>
          <div class="container">
              <!-- div.w-100 is also needed in certain circumstances to make this menu a mega menu -->
              <div class="row w-100">
                <a class="dropdown-item" href="#">PPA Item 1</a>
                <a class="dropdown-item" href="#">PPA Item 2</a>
                <a class="dropdown-item" href="#">PPA Item 3</a>
              </div>
          </div>
        </div>
      </li>
      <li class="nav-item dropdown position-static" ngbDropdown>
          <a class="nav-link dropdown-toggle" id="id04" href="#" ngbDropdownToggle>Tax</a>
          <div class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id04" ngbDropdownMenu>
            <div class="container">
                <div class="row w-100">
                  <a class="dropdown-item" href="#">Tax Item 1</a>
                  <a class="dropdown-item" href="#">Tax Item 2</a>
                  <a class="dropdown-item" href="#">Tax Item 3</a>
                </div>
            </div>
          </div>
      </li>
      <li class="nav-item dropdown position-static" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id04" href="#" ngbDropdownToggle>Records</a>
        <div class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id04" ngbDropdownMenu>
          <div class="container">
              <div class="row w-100">
                <a class="dropdown-item" href="#">Records Item 1</a>
                <a class="dropdown-item" href="#">Records Item 2</a>
                <a class="dropdown-item" href="#">Records Item 3</a>
              </div>
          </div>
        </div>
      </li>        
      <li class="nav-item dropdown position-static" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id05" href="#" ngbDropdownToggle>Cashiering</a>
        <div class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id05" ngbDropdownMenu>
          <div class="container">
              <div class="row w-100">
                <a class="dropdown-item" href="#">Cashiering Item 1</a>
                <a class="dropdown-item" href="#">Cashiering Item 2</a>
                <a class="dropdown-item" href="#">Cashiering Item 3</a>
              </div>
          </div>
      </div>
      </li>
      <li class="nav-item dropdown position-static" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id06" href="#" ngbDropdownToggle>Info Center</a>
        <div class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id06" ngbDropdownMenu>
          <div class="container">
              <div class="row w-100">
                <a class="dropdown-item" href="#">IC Item 1</a>
                <a class="dropdown-item" href="#">IC Item 2</a>
                <a class="dropdown-item" href="#">IC Item 3</a>
              </div>
          </div>
        </div>
      </li>
      <li class="nav-item dropdown position-static" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id07" href="#" ngbDropdownToggle>Reports</a>
        <div class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id07" ngbDropdownMenu>
          <div class="container">
              <div class="row w-100">
                <a class="dropdown-item" href="#">Reports Item 1</a>
                <a class="dropdown-item" href="#">Reports Item 2</a>
                <a class="dropdown-item" href="#">Reports Item 3</a>
              </div>
          </div>
        </div>
      </li>
      <li class="nav-item dropdown position-static" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id08" href="#" ngbDropdownToggle>Case Management</a>
        <div class="dropdown-menu w-100 top-auto mt-0" aria-labelledby="id07" ngbDropdownMenu>
          <div class="container">
              <div class="row w-100">
                <a class="dropdown-item" href="#">CM Item 1</a>
                <a class="dropdown-item" href="#">CM Item 2</a>
                <a class="dropdown-item" href="#">CM Item 3</a>
              </div>
          </div>
        </div>
      </li>
    </ul>
  </div>
  <div id="nav-toolpanel" class="navbar-header order-3">
    <!--
      Needed here:
        Workflow link
        Bulk Messaging
        Common Actions
        Attachments
        Help
    -->
    <div class="row" style="width:500px">
      <div class="nav-link">
        <a href="#" title="Effective Date">
          1 JAN 2020
          <span class="fa fa-calendar"></span>
        </a>
      </div>
      <div class="nav-item dropdown " ngbDropdown>
        <div class="nav-link dropdown-toggle" id="id11" ngbDropdownToggle><span class="fa fa-tasks"></span><sup id="notification-icon" class="badge badge-pill badge-primary">2</sup></div>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="id11" ngbDropdownMenu>
          <a class="dropdown-item" href="tasks">Manage Tasks...</a>          
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="dap">Task: Data Analysis and Processing</a>
          <a class="dropdown-item" href="tasks">Task: Tasks</a>
        </div>
      </div>
      <div class="nav-item dropdown" ngbDropdown>
        <div class="nav-link dropdown-toggle" id="id11"  ngbDropdownToggle><span class="fa fa-bell"></span><sup id="notification-icon" class="badge badge-pill badge-primary">2</sup></div>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="id11" ngbDropdownMenu>
          <a class="dropdown-item" href="#">Workflow Split: OD2020-01-01-4567</a>
          <a class="dropdown-item" href="#">Workflow Merge: OD2020-04-30-7634</a>
        </div>
      </div>      
      <div class="nav-item dropdown " ngbDropdown>
        <a class="nav-link dropdown-toggle" id="id11" href="#" ngbDropdownToggle><span class="fa fa-cog"></span></a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="id11" ngbDropdownMenu>
          <a class="dropdown-item" href="#">Application Settings</a>
          <a class="dropdown-item" href="#">Flag Setup</a>
          <a class="dropdown-item" href="#">Systypes</a>
          <a class="dropdown-item" href="#">User Defined Fields</a>
          <a class="dropdown-item" href="#">Edit Checks</a>
          <a class="dropdown-item" href="#">Attachments</a>
          <a class="dropdown-item" href="#">etc...</a>
        </div>
      </div>
      <div class="nav-item dropdown " ngbDropdown>
        <div class="nav-link dropdown-toggle" id="id12" href="#" ngbDropdownToggle><img class="user-portrait" src='../../assets/me.png'></div>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="id12" ngbDropdownMenu>
          <div class="dropdown-item">
              <div style="display:inline;">
                <img class="user-portrait-lg"  style="display:inline" src='../../assets/me.png'>
                <div style="display:inline-block">
                  <div>Sean Butler</div>
                  <div>Lead Software Engineer</div>
                </div>
              </div>
          </div>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">Preferences...</a>
          <a class="dropdown-item" href="#">Help</a>
          <a class="dropdown-item" href="#">Sign Out</a>
        </div>
      </div>
    </div>
  </div>
</nav>

     